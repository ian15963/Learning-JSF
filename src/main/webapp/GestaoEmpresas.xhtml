<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:p="http://primefaces.org/ui">
<h:head>

<meta charset="UTF-8"/>
<title>Gestão de Empresas</title>

<h:outputStylesheet library="empresas" name="estilo.css"/>

</h:head>

<h:body>
	<header>
		<h:graphicImage library="empresas" name="logo.png"/>
	</header>
	
	<div id="conteudo">
		
		<f:metadata>
			<f:viewAction action="#{empresaBean.listarEmpresas()}"/>
		</f:metadata>
		
		<h:form id="formulario">
			<h:panelGrid columns="2">
			
				<p:outputLabel value="Razão Social" for="razaoSocial" />
				<h:panelGroup>
					<p:inputText id="razaoSocial" 
								 value="#{empresaBean.empresa.razaoSocial}" 
								 required="true"
								 label="Razão Social"/>
					<p:message for="razaoSocial"/>
				</h:panelGroup>
				
				<p:outputLabel value="Nome fantasia" for="nomeFantasia"/>
				<p:inputText id="nomeFantasia" 
							 value="#{empresaBean.empresa.nomeFantasia}"/>
				
				<h:outputLabel value="Data Fundação" for="dataFundacao"/>
				<h:panelGroup>
					<p:inputText id="dataFundacao" 
								 value="#{empresaBean.empresa.dataFundacao}"
								 label="Data fundação"
								 required="true">
						<f:convertDateTime pattern="dd/MM/yyyy"/>
					</p:inputText>
					<p:message for="dataFundacao"/>
				</h:panelGroup>
				
				<p:outputLabel value="Faturamento" for="faturamento"/>
				<h:panelGroup>
					<p:inputText id="faturamento" 
								 value="#{empresaBean.empresa.faturamento}"
								 label="Faturamento" >
						<f:convertNumber pattern="#,##0.00" />
						<f:validateDoubleRange minimum="0" />
					</p:inputText>
					<p:message for="faturamento"/>
				</h:panelGroup>
				 
				<p:outputLabel value="CNPJ" for="cnpj"/>
				
				<h:panelGroup>
					<p:inputText id="cnpj" 
								 value="#{empresaBean.empresa.cnpj}"
								 label="CNPJ">
						<f:validateLength minimum="18" maximum="18" />
					</p:inputText>
					<p:message for="cnpj"/>			 
				</h:panelGroup>
				
				<p:outputLabel value="Tipo empresa" for="tipoEmpresa"/>
				<p:selectOneMenu id="tipoEmpresa" value="#{empresaBean.empresa.tipo}">
					<f:selectItem itemLabel="Selecione..."/>
					<f:selectItems value="#{empresaBean.getTiposEmpresa()}"
						var="tipoEmpresa" itemLabel="#{tipoEmpresa.getDescricao()}" itemValue="#{tipoEmpresa}"/>
				</p:selectOneMenu>
				
				<p:outputLabel/>
				<p:commandButton value="Salvar" 
								 actionListener="#{empresaBean.salvar}"
								 update="@form tabelaEmpresa"/>
			</h:panelGrid>
			<p:dataTable id="tabelaEmpresa" 
						 value="#{empresaBean.empresas}"
						 var="empresa"
						 paginator="true"
						 paginatorPosition="bottom"
						 rows="1">
				
				<p:column headerText="Razão Social">
					<h:outputText value="#{empresa.razaoSocial}"/>
				</p:column>
				
				<p:column headerText="Nome Fantasia">
					<h:outputText value="#{empresa.nomeFantasia}"/>
				</p:column>
				
				<p:column headerText="Tipo Empresa">
					<h:outputText value="#{empresa.tipo}"/>
				</p:column>
				
				<p:column headerText="Ramo Atividade">
					<h:outputText value="#{empresa.ramoAtividade.descricao}"/>
				</p:column>
			
			</p:dataTable>
		</h:form>
	
	</div>

	<footer>
		Curso online "JSF" e primefaces essencial.
	</footer>
</h:body>

</html>